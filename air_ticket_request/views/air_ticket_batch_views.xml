<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <!-- عرض قائمة Batches -->
        <record id="view_air_ticket_batch_list" model="ir.ui.view">
            <field name="name">air.ticket.request.batch.list</field>
            <field name="model">air.ticket.request.batch</field>
            <field name="arch" type="xml">
                <list string="Air Ticket Batches">
                    <field name="name"/>
                    <field name="date"/>
                    <field name="company_id" groups="base.group_multi_company"/>
                    <field name="count_requests" string="Number of Requests"/>
                    <field name="state" widget="statusbar"/>
                </list>
            </field>
        </record>

        <!-- نموذج Batch -->
        <record id="view_air_ticket_batch_form" model="ir.ui.view">
            <field name="name">air.ticket.request.batch.form</field>
            <field name="model">air.ticket.request.batch</field>
            <field name="arch" type="xml">
                <form string="Air Ticket Request Batch">
                    <header>
                        <button name="review" string="Data review" invisible="state != 'new'" type="object" class="oe_highlight" confirm="Are you sure that you Reviewed data for all employees ?"/>
                        <button name="approve" string="Final approve" invisible="state != 'reviewed'" type="object" class="oe_highlight" confirm="Are you sure that you want to approve data for all employees ?"/>
                        <button name="refuse" string="Refuse" invisible="state not in ('new', 'reviewed')" type="object" confirm="Are you sure that you want to refuse data for all employees ?"/>
                        <button name="reset" string="Set to new" invisible="state not in ('refused', 'reviewed')" type="object" confirm="Are you sure that you want to set data for all employees to new ?"/>
                        <button name="refresh" string="Refresh data" invisible="state not in ('new', 'reviewed')" type="object" confirm="Are you sure that you want to refresh data for all employees. this action may change employee air ticket balance."/>
                        <field name="state" widget="statusbar"/>
                    </header>
                    <sheet>
                        <div class="oe_button_box" name="button_box">
                            <button type="object" name="open_requests" icon="fa-plane" class="oe_inline oe_stat_button">
                                <field string="Air ticket requests" name="count_requests" widget="statinfo"/>
                            </button>
                        </div>
                        <group>
                            <field name="name"/>
                            <field name="company_id" groups="base.group_multi_company"/>
                            <field name="date"/>
                        </group>
                        <notebook>
                            <page string="Air Ticket Requests">
                                <group>
                                    <button string="Generate Air Ticket Allowance" name="generate_requests" type="object" class="oe_highlight"/>
                                </group>
                                <group>
                                    <field name="request_ids" nolabel="1">
                                        <list editable="bottom" create="false" delete="false">
                                            <field name="employee_id"/>
                                            <field name="country_id"/>
                                            <field name="air_ticket_type"/>
                                            <field name="ticket_allowance_per_contract"/>
                                            <field name="current_air_ticket_balance" string="Current balance"/>
                                            <field name="deduct" string="Liquidation In Months"/>
                                            <field name="remaining_balance" string="Remaining balance in months"/>
                                            <field name="company_share" string="Amount Paid To Employee"/>
                                            <field name="state"/>
                                        </list>
                                    </field>
                                </group>
                            </page>
                            <page string="Attachments">
                                <group string="Attachments">
                                    <field name="attachment_ids" nolabel="1">
                                        <list editable="bottom">
                                            <field name="name" required="1"/>
                                            <field name="datas" filename="name"/>
                                            <field name="description"/>
                                        </list>
                                        <form>
                                            <group>
                                                <field name="name"/>
                                                <field name="datas" filename="name"/>
                                                <field name="description"/>
                                            </group>
                                        </form>
                                    </field>
                                </group>
                            </page>
                            <page string="Notes">
                                <group string="Notes">
                                    <field name="note" nolabel="1"/>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                    <chatter/>
                </form>
            </field>
        </record>

        <!-- إجراءات النموذج -->
        <record id="action_air_ticket_batch" model="ir.actions.act_window">
            <field name="name">Air Ticket Batches</field>
            <field name="res_model">air.ticket.request.batch</field>
            <field name="view_mode">list,form</field>
            <field name="view_id" ref="view_air_ticket_batch_list"/>
        </record>

        <!-- عنصر قائمة -->
        <menuitem id="menu_air_ticket_batch" name="Air Ticket Batches" 
                 action="action_air_ticket_batch" 
                 parent="air_ticket_request.menu_air_ticket_request"
                 sequence="10"/>

    </data>
</odoo>