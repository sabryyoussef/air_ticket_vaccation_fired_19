<?xml version="1.0" encoding="utf-8"?>

<odoo>
    <!-- 18 invisible="state not in ('approved', 'selected_afish', 'confirmed_measure','measures_devices','completed')"> -->
        <!-- Your provided form view goes here -->
     

    <data>
        <record id="view_air_ticket_type_form" model="ir.ui.view">
            <field name="name">air.ticket.type.form</field>
            <field name="model">air.ticket.type</field>
            <field name="arch" type="xml">
                <form string="Air Ticket Types">
                    <header>
                        <button name="ticket_approve" string="Approve" type="object" class="oe_highlight" groups="hr.group_hr_manager" invisible="state != 'New'" confirm="Are you sure that you want to approve this air ticket type?"/>
                        <button name="ticket_set_new" string="set to new" type="object" class="oe_highlight" groups="hr.group_hr_manager" invisible="state != 'Approved'" confirm="Are you sure that you want to set this air ticket type to new?"/>
                        <field name="state" widget="statusbar" readonly="1"/>
                    </header>
                    <sheet>
                        <div class="oe_button_box" name="button_box">
                            <button type="object" name="open_requests" class="oe_inline oe_stat_button" icon="fa-ticket">
                                <field name="air_ticket_request_count" widget="statinfo" string="Air ticket requests"/>
                            </button>
                        </div>
                        <div class="oe_title">
                            <label for="name" class="oe_edit_only"/>
                            <h1>
                                <field name="name"/>
                            </h1>
                        </div>
                        <group>
                            <group>
                                <field name="policy_name" readonly="state == 'Approved'"/>
                                <field name="type" required="1" readonly="state == 'Approved'" groups="hr.group_hr_user"/>
                                <field name="allocation_technique" invisible="type != 'annual' or frequency_air_ticket != 'one time each'" required="type == 'annual' and frequency_air_ticket == 'one time each'" groups="hr.group_hr_user"/>
                                <field name="allocation_period" invisible="type != 'annual' or frequency_air_ticket != 'one time each'" required="type == 'annual' and frequency_air_ticket == 'one time each'" groups="hr.group_hr_user"/>
                                <field name="nationality" readonly="state == 'Approved'" groups="hr.group_hr_user"/>
                                <field name="can_request_exit_rentry" readonly="state == 'Approved'" invisible="nationality not in ('Non-native', 'All Nationalities')" groups="hr.group_hr_user"/>
                                <field name="frequency_air_ticket" readonly="state == 'Approved'" groups="hr.group_hr_user"/>
                                <label for="number_of_months" invisible="frequency_air_ticket != 'one time each'" groups="hr.group_hr_user"/>
                                <div invisible="frequency_air_ticket != 'one time each'" groups="hr.group_hr_user">
                                    <field name="number_of_months" class="oe_inline" readonly="state == 'Approved'"/>
                                    In Months
                                </div>
                                <label for="months_to_request_air_ticket" invisible="frequency_air_ticket != 'one time each'" groups="hr.group_hr_user"/>
                                <div invisible="frequency_air_ticket != 'one time each'" groups="hr.group_hr_user">
                                    <field name="months_to_request_air_ticket" class="oe_inline" readonly="state == 'Approved'"/>
                                    In Months
                                </div>
                            </group>
                            <group groups="hr.group_hr_user">
                                <label for="maximum_accumulated_balance" invisible="frequency_air_ticket != 'one time each'"/>
                                <div invisible="frequency_air_ticket != 'one time each'">
                                    <field name="maximum_accumulated_balance" class="oe_inline" readonly="state == 'Approved'"/>
                                    In Months
                                </div>
                                <field name="air_ticket_class" invisible="frequency_air_ticket == 'Not allowed'" required="frequency_air_ticket != 'Not allowed'" readonly="state == 'Approved'"/>
                                <field name="give_cash_instead_tickets" invisible="frequency_air_ticket == 'Not allowed'" required="frequency_air_ticket != 'Not allowed'" readonly="state == 'Approved'"/>
                                <field name="relatives_tickets" invisible="frequency_air_ticket == 'Not allowed'" required="frequency_air_ticket != 'Not allowed'" readonly="state == 'Approved'"/>
                                <field name="number_of_wives" invisible="relatives_tickets != 'Allow tickets for relatives'" readonly="state == 'Approved'"/>
                                <field name="children" invisible="relatives_tickets != 'Allow tickets for relatives'" readonly="state == 'Approved'"/>
                                <label for="max_child_age" invisible="relatives_tickets != 'Allow tickets for relatives'"/>
                                <div invisible="relatives_tickets != 'Allow tickets for relatives'">
                                    <field name="max_child_age" class="oe_inline" readonly="state == 'Approved'"/>
                                    Years
                                </div>
                                <field name="number_of_relatives" readonly="1" invisible="relatives_tickets != 'Allow tickets for relatives' or frequency_air_ticket == 'Not allowed'"/>
                            </group>
                        </group>
                        <notebook groups="hr.group_hr_user">
                            <page string="Air ticket requests">
                                <group string="Air ticket requests">
                                    <field name="air_ticket_request_ids" readonly="1" nolabel="1"/>
                                </group>
                            </page>
                            <page string="Notes">
                                <field name="notes" readonly="state == 'Approved'"/>
                            </page>
                        </notebook>
                    </sheet>
                    <chatter/>
                </form>
            </field>
        </record>

        <!-- list view -->
        <record id="view_air_ticket_type_list" model="ir.ui.view">
            <field name="name">air.ticket.type.list</field>
            <field name="model">air.ticket.type</field>
            <field name="arch" type="xml">
                <list>
                    <field name="name"/>
                    <field name="policy_name"/>
                    <field name="type"/>
                    <field name="state"/>
                    <field name="frequency_air_ticket"/>
                </list>
            </field>
        </record>

        <!-- Search view -->
        <record id="view_air_ticket_type_search" model="ir.ui.view">
            <field name="name">air.ticket.type.search</field>
            <field name="model">air.ticket.type</field>
            <field name="arch" type="xml">
                <search>
                    <field name="name"/>
                    <field name="policy_name"/>
                    <field name="state"/>
                    <filter string="New" name="new" domain="[('state','=','New')]"/>
                    <filter string="Approved" name="approved" domain="[('state','=','Approved')]"/>
                </search>
            </field>
        </record>

        <!-- Action -->
        <record id="action_air_ticket_type" model="ir.actions.act_window">
            <field name="name">Air Ticket Types</field>
            <field name="res_model">air.ticket.type</field>
            <field name="view_mode">list,form</field>
            <field name="view_id" ref="view_air_ticket_type_list"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Create your first air ticket type!
                </p>
            </field>
        </record>

        <!-- Menu -->
        <menuitem id="menu_air_ticket_type" name="Air Ticket Types" 
                 parent="air_ticket_request.menu_air_ticket_request" action="action_air_ticket_type" sequence="50"/>
    </data>
</odoo>